# Func Linux -- Post-install shell commands
# Calamares variabel: @@USERNAME@@ expanderas till anvandaren som skapades
---
dontChroot: false

script:
    # Satt CLI-boot som standard (ingen display manager)
    - command: "systemctl set-default multi-user.target"
      timeout: 10

    # Aktivera Docker
    - command: "systemctl enable docker"
      timeout: 10

    # Skapa Drive-mapp
    - command: "mkdir -p /home/@@USERNAME@@/Drive && chown @@USERNAME@@:@@USERNAME@@ /home/@@USERNAME@@/Drive"
      timeout: 10

    # Skapa log-mapp for Func Linux
    - command: "mkdir -p /home/@@USERNAME@@/.local/share/func-linux && chown -R @@USERNAME@@:@@USERNAME@@ /home/@@USERNAME@@/.local"
      timeout: 10

    # Aktivera lingering for systemd user services (Google Drive mount)
    - command: "loginctl enable-linger @@USERNAME@@"
      timeout: 10
